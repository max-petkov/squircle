<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/main.css">
    <title>Superellipse</title>
</head>

<body>
    <section class="buttons">
        <div class="container">
            <div class="buttons__container">
                <div class="buttons__wrapper">
                    <a href="#">Button</a>
                    <p class="text-overline">Default</p>
                </div>
                <div class="buttons__wrapper">
                    <a href="#" class="is-squircle">Button</a>
                    <p class="text-overline">Smooth Corner</p>
                </div>
            </div>
        </div>
    </section>

    <section class="modals">
        <div class="container">
            <div class="modals__container">
                <div class="modals__wrapper">
                    <div class="modal">
                        <h6 class="modal__title">Payment successful</h6>
                        <div class="modal__body">
                            <div class="modal__icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <rect width="48" height="48" rx="24" fill="#87EEAC" />
                                    <path
                                        d="M34.2656 16.7344C34.5469 17.0156 34.5469 17.5312 34.2656 17.8125L21.5156 30.5625C21.2344 30.8438 20.7188 30.8438 20.4375 30.5625L13.6875 23.8125C13.4062 23.5312 13.4062 23.0156 13.6875 22.7344C13.9688 22.4531 14.4844 22.4531 14.7656 22.7344L21 28.9688L33.1875 16.7344C33.4688 16.4531 33.9844 16.4531 34.2656 16.7344Z"
                                        fill="#16813D" />
                                </svg>
                            </div>
                            <p class="modal__text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi at
                                euismod tortor, eget luctus neque.</p>
                        </div>
                        <div class="modal__footer">
                            <a href="#" class="btn-ghost">Close</a>
                            <a href="#" class="btn-success">Go to dashboard</a>
                        </div>
                        <span class="modal__close">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M16.0547 16.5938C16.2891 16.3594 16.2891 15.9297 16.0547 15.6953L10.8594 10.5L16.0547 5.34375C16.2891 5.10938 16.2891 4.67969 16.0547 4.44531C15.8203 4.21094 15.3906 4.21094 15.1562 4.44531L10 9.64062L4.80469 4.44531C4.57031 4.21094 4.14062 4.21094 3.90625 4.44531C3.67188 4.67969 3.67188 5.10938 3.90625 5.34375L9.10156 10.5L3.90625 15.6953C3.67188 15.9297 3.67188 16.3594 3.90625 16.5938C4.14062 16.8281 4.57031 16.8281 4.80469 16.5938L10 11.3984L15.1562 16.5938C15.3906 16.8281 15.8203 16.8281 16.0547 16.5938Z"
                                    fill="#757B8A" />
                            </svg>
                        </span>
                    </div>
                    <p class="text-overline">Default</p>
                </div>
                <div class="modals__wrapper">
                    <div style="filter: drop-shadow(0px 0px 0.5px #626262);">
                        <div class="modal is-squircle">
                            <h6 class="modal__title">Payment successful</h6>
                            <div class="modal__body">
                                <div class="modal__icon">
                                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <rect width="48" height="48" rx="24" fill="#87EEAC" />
                                        <path
                                            d="M34.2656 16.7344C34.5469 17.0156 34.5469 17.5312 34.2656 17.8125L21.5156 30.5625C21.2344 30.8438 20.7188 30.8438 20.4375 30.5625L13.6875 23.8125C13.4062 23.5312 13.4062 23.0156 13.6875 22.7344C13.9688 22.4531 14.4844 22.4531 14.7656 22.7344L21 28.9688L33.1875 16.7344C33.4688 16.4531 33.9844 16.4531 34.2656 16.7344Z"
                                            fill="#16813D" />
                                    </svg>
                                </div>
                                <p class="modal__text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi at
                                    euismod tortor, eget luctus neque.</p>
                            </div>
                            <div class="modal__footer">
                                <div style="filter: drop-shadow(0px 0px 0.5px #626262);">
                                    <a href="#" class="btn-ghost is-squircle" data-border="true">Close</a>
                                </div>
                                <a href="#" class="btn-success is-squircle">Go to dashboard</a>
                            </div>
                            <span class="modal__close">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M16.0547 16.5938C16.2891 16.3594 16.2891 15.9297 16.0547 15.6953L10.8594 10.5L16.0547 5.34375C16.2891 5.10938 16.2891 4.67969 16.0547 4.44531C15.8203 4.21094 15.3906 4.21094 15.1562 4.44531L10 9.64062L4.80469 4.44531C4.57031 4.21094 4.14062 4.21094 3.90625 4.44531C3.67188 4.67969 3.67188 5.10938 3.90625 5.34375L9.10156 10.5L3.90625 15.6953C3.67188 15.9297 3.67188 16.3594 3.90625 16.5938C4.14062 16.8281 4.57031 16.8281 4.80469 16.5938L10 11.3984L15.1562 16.5938C15.3906 16.8281 15.8203 16.8281 16.0547 16.5938Z"
                                        fill="#757B8A" />
                                </svg>
                            </span>
                        </div>
                    </div>
                    <p class="text-overline">Smooth Corner</p>
                </div>
            </div>
        </div>
    </section>

    <script type="module">
        import { getSvgPath } from "./libs/module.js";

        // TODO
        //   READY | 1. Attach Border Radius to element
        //   READY | 2. Make squircle function like library (check GSAP)
        //   3. Add Responsivness
        //   READY | 4. Check performance time
        //   READY | 5. Loop Elements | Example: every element which contains .is-squircle are going to be rendered with smooth corners
        //   6. Get source code from npm and make it without export (eliminate module type)  
        //   7. Add figma-scuircle documentation  
        //   8. Create Color Border Fix

        function squircle(config) {
            const squircle = {
                element: (typeof config.element === "object") ? config.element : document.querySelector(config.element),
                width: function () {
                    return Number(getComputedStyle(this.element).width.split("px")[0]);
                },
                height: function () {
                    return Number(getComputedStyle(this.element).height.split("px")[0]);
                },
                borderRadius: function () {
                    return Number(getComputedStyle(this.element).borderRadius.split("px")[0]);
                },
                svgPath: function (width, height) {
                    return getSvgPath({
                        width: width,
                        height: height,
                        cornerRadius: config.cornerRadius || this.borderRadius(),
                        cornerSmoothing: config.cornerSmoothing || 1,
                        preserveSmoothing: config.preserveSmoothing || false, // This option allows corner smoothing to work better on large rounded corners.
                    })
                },
                render: function () {
                    const pathSquircle = squircle.svgPath(this.width(), this.height());

                    this.element.style.width = this.width() + "px";
                    this.element.style.height = this.height() + "px";
                    this.element.style.clipPath = `path("${pathSquircle}")`;
                    this.element.style.borderRadius = 0;
                }
            };

            return squircle.render();
        }


        const squircles = document.querySelectorAll(".is-squircle");

        squircles.forEach(el => {
            squircle({
                element: el,
                // element: ".btn-f-squircle",
                // cornerRadius: 20, (Optional)
                // cornerSmoothing: 1 (Optional)
                preserveSmoothing: true
            })
        });



    </script>
</body>

</html>